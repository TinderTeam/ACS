<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>用户管理</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link href="../../Script/demo.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/boot.js" type="text/javascript"></script>
</head>
<body>
    <style type="text/css">
        html, body
        {
            margin: 0;
            padding: 0;
            border: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
    </style>
    <div style="width: 100%;">
        <div class="mini-toolbar" style="border-bottom: 0; padding: 0px;">
            <table style="width: 100%;">
                <tr>
                    <td style="width: 100%;">
                        <a class="mini-button" iconcls="icon-save" onclick="save()">保存</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="mini-fit">
        <div id="doortimegird" class="mini-datagrid" style="width:100%;height:100%;" 
        url="LoadDoorTime?DoorID=@ViewBag.DoorID" idField="id" 
        allowResize="true"  
        allowCellEdit="true" allowCellSelect="true" multiSelect="true" 
        editNextOnEnterKey="true"
        
    >
            <div property="columns">
                <div field="Enable" type="comboboxcolumn" autoShowPopup="true"   width="30" headeralign="center" align="center" allowsort="true">
                    启用      
                    <input property="editor" class="mini-combobox" style="width:100%;" data="Genders" />     
                </div>            
                <div field="DoorTimeID" width="30" headeralign="center" align="center" allowsort="true">
                    时间段编号      
                </div>
                <div field="DoorID" width="30" allowsort="true" renderer="onGenderRenderer" align="center" headeralign="center">
                    门编号              
                </div>
                <div field="DoorTimeName" width="100" align="center" allowsort="true" headeralign="center">
                    时间段名称
              <input property="editor" class="mini-textbox" style="width: 100%;" minwidth="200" />
                </div>
                <div field="StartTime" width="100" allowsort="true" align="center" dateformat="H:mm" headeralign="center">
                    开始时间
            <input property="editor" class="mini-timeSpinner" style="width: 100%;"  format="H:mm" />
                </div>
                <div field="EndTime" property="editor" width="100" align="center" headeralign="center" dateformat="H:mm" allowsort="true" headeralign="center" format="H:mm">
                    截止时间
                      <input property="editor" class="mini-timeSpinner" style="width: 100%;" format="H:mm" />
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        var Genders = [{ id: 1, text: '启用' }, { id: 0, text: '禁用' }];

        mini.parse();
        var grid = mini.get("#doortimegird");
        grid.load();
        grid.beginEditRow(row);


        function save() {
            var data = grid.getChanges();
            var json = mini.encode(data);

            grid.loading("保存中，请稍后......");
            $.ajax({
                url: "DoorTimeSave",
                data: { data: json },
                type: "post",
                success: function (text) {
                    grid.reload();
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                }
            });

        }
    </script>
</body>
</html>
