<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>门禁管理系统</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="jquery,datagrid,grid,表格控件,ajax,web开发,java开发,.net开发,tree,table,treegrid" />
    <meta name="description" content="jQuery MiniUI - 专业WebUI控件库。jQuery MiniUI是使用Javascript实现的前端Ajax组件库，支持所有浏览器，可以跨平台开发，如Java、.Net、PHP等。" />
    <script src="../../Scripts/boot.js" type="text/javascript"></script>
	<link href="../../Scripts/demo.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/core.js" type="text/javascript"></script>

    <style type="text/css">
    html, body{
        margin:0;padding:0;border:0;width:100%;height:100%;overflow:hidden;
    }

    .logo
    {
        font-family:"微软雅黑",	"Helvetica Neue",​Helvetica,​Arial,​sans-serif;
        font-size:28px;font-weight:bold;color:#444;        
        cursor:default;
        position:absolute;top:28px;left:15px;        
        line-height:28px;
    }    
    .topNav
    {
        position:absolute;right:8px;top:10px;        
        font-size:12px;
        line-height:25px;
    }
    .topNav a
    {
        text-decoration:none;
        color:#222;
        font-weight:normal;
        font-size:12px;
        line-height:25px;
        margin-left:3px;
        margin-right:3px;
    }
    .topNav a:hover
    {
        text-decoration:underline;
        color:Blue;
    }   
     .mini-layout-region-south img
    {
        vertical-align:top;
    }
    </style>
</head>
    <body>
        <div class="mini-layout" style="width:100%;height:100%;">
    <div title="north" region="north" class="app-header" bodyStyle="overflow:hidden;" height="80" showHeader="false" showSplit="false">
        <div class="logo">澳普门禁管理系统</div>

        <div class="topNav">	
            <a id="PersonalInfo" href="javascript:personalManage()">@Resources.Resource.ResourceManager.GetString("PersonalInfo")</a> |
            <a id="ModifyPswd" href="javascript:pswdManage()">@Resources.Resource.ResourceManager.GetString("ModifyPswd")</a> |            
            <a href="Index/Exit">@Resources.Resource.ResourceManager.GetString("Exit")</a>
			<a>&nbsp&nbsp</a>
        </div>

        <div style="position:absolute;right:12px;bottom:5px;font-size:12px;line-height:25px;font-weight:normal;">
            <span style="color:Red;font-family:Tahoma">（推荐Blue）</span>选择皮肤：
            <select id="selectSkin" onchange="onSkinChange(this.value)" style="width:100px;" >
                <option value="">Default</option>
                <option value="blue">Blue</option>
                <option value="gray">Gray</option>
                <option value="olive2003">Olive2003</option>
                <option value="blue2003">Blue2003</option>
                <option value="blue2010">Blue2010</option>
                <option value="bootstrap">Bootstrap</option>

                <option value="metro">metro</option>
                <option value="metro-green">metro-green</option>
                <option value="metro-orange">metro-orange</option>

                <option value="jqueryui-uilightness">jqueryui-uilightness</option>
                <option value="jqueryui-humanity">jqueryui-humanity</option>
                <option value="jqueryui-excitebike">jqueryui-excitebike</option>
                <option value="jqueryui-cupertino">jqueryui-cupertino</option>
            </select>
        </div>
    </div>
    <div showHeader="false" region="south" style="border:0;text-align:center;" height="25" showSplit="false">
        Copyright © 深圳市孚思科技有限公司版权所有 
    </div>
    <div title="center" region="center" style="border:0;" bodyStyle="overflow:hidden;">
        <!--Splitter-->
        <div class="mini-splitter" style="width:100%;height:100%;" borderStyle="border:0;">
            <div size="180" maxSize="250" minSize="100" showCollapseButton="true" style="border:0;">
                <!--OutlookTree-->
                <div id="leftTree" class="mini-outlooktree" url="Index/MenuTree" onnodeclick="onNodeSelect"
                    textField="text" idField="id" parentField="pid"             
                >
                </div>
                
            </div>
            <div showCollapseButton="false" style="border:0;">
                <!--Tabs-->
                <div id="mainTabs" class="mini-tabs" activeIndex="0" style="width:100%;height:100%;"      
                     plain="false" onactivechanged="onTabsActiveChanged"
                >
                    
					<div title="首页" showCloseButton="true" url="/Index/Overview" >        
                    </div>
                    <!--<div title="子页面关闭" url="../tabs/pages/page1.html" >        
                    </div>
                    <div title="弹出面板" url="../datagrid/datagrid.html" >        
                    </div>
                    <div title="弹出面板" url="../datagrid/fixedcolumns.html" >        
                    </div> -->
                </div>
            </div>        
        </div>
    </div>
	
</div>
<script type="text/javascript">
    mini.parse();

    var tree = mini.get("leftTree");

    function showTab(node) {
        var tabs = mini.get("mainTabs");

        var id = "tab$" + node.id;
        var tab = tabs.getTab(id);
        if (!tab) {
            tab = {};
            tab._nodeid = node.id;
            tab.name = id;
            tab.title = node.text;
            tab.showCloseButton = true;

            //这里拼接了url，实际项目，应该从后台直接获得完整的url地址
            tab.url = node.id;

            tabs.addTab(tab);
        }
        tabs.activeTab(tab);
    }

    function onNodeSelect(e) {
        var node = e.node;
        var isLeaf = e.isLeaf;

        if (isLeaf) {
            showTab(node);
        }
    }

    function onClick(e) {
        var text = this.getText();
        alert(text);
    }
    function onQuickClick(e) {
        tree.expandPath("datagrid");
        tree.selectNode("datagrid");
    }

    function onTabsActiveChanged(e) {
        var tabs = e.sender;
        var tab = tabs.getActiveTab();
        if (tab && tab._nodeid) {

            var node = tree.getNode(tab._nodeid);
            if (node && !tree.isSelectedNode(node)) {
                tree.selectNode(node);
            }
        }
    }

    </script>
	<script>
	    function personalManage() {
	        mini.open({
	            url: "PersonalManage/PersonalManage",
	            title: document.getElementById("PersonalInfo").innerHTML, width: 600, height: 360,
	            onload: function () {
	                var iframe = this.getIFrameEl();
	                var data = { action: "new" };
	                iframe.contentWindow.SetData(data);
	            },
	            ondestroy: function (action) {
	            }
	        });
	    }
	    function pswdManage() {
	        mini.open({
	            url: "PersonalManage/PswdManage",
	            title: document.getElementById("ModifyPswd").innerHTML, width: 400, height: 240,
	            onload: function () {
	                var iframe = this.getIFrameEl();
	                var data = { action: "new" };
	                iframe.contentWindow.SetData(data);
	            },
	            ondestroy: function (action) {
	            }
	        });
	    }
	</script>
    </body>
</html>
<script type="text/javascript">
    mini.parse();
    function onBeforeExpand(e) {
        var tree = e.sender;
        var nowNode = e.node;
        var level = tree.getLevel(nowNode);

        var root = tree.getRootNode();
        tree.cascadeChild(root, function (node) {
            if (tree.isExpandedNode(node)) {
                var level2 = tree.getLevel(node);
                if (node != nowNode && !tree.isAncestor(node, nowNode) && level == level2) {
                    tree.collapseNode(node, true);
                }
            }
        });

    }
</script>

<script src="../../scripts/tongji.js" type="text/javascript"></script>