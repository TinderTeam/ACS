<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>用户权限管理</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="../../scripts/boot.js" type="text/javascript"></script>
</head>
<body>
 <style type="text/css">
    html, body{
        margin:10px;padding:0;border:0;width:100%;height:100%;overflow:hidden;
    }

       .my-label
     {
         padding-left: 1px;
         width: 100px;
         text-align:right;
     }
      .my-result
     {
         padding-left: 1px;
         width: 100px;
         text-align:left;
     }
</style>       
<div class="mini-fit" >
        <div id="tabs1" class="mini-tabs" activeIndex="0" style="width:90%;height:90%;">
            <div title="菜单权限分配">
               <h3>菜单权限分配</h3>
                <ul id="menutree" class="mini-tree" url="../Test/tree.txt" style="width:80%;height:80%;"
                    showTreeIcon="true" textField="text" idField="id" showCheckBox="true"
                    checkRecursive="true" allowSelect="false" enableHotTrack="false">        
                </ul>
            </div>
            <div title="管理范围分配">
               <h3>管理范围分配</h3>
                <ul id="admintree" class="mini-tree" url="../Test/tree.txt" style="width:80%;height:80%;"
                    showTreeIcon="true" textField="text" idField="id" showCheckBox="true"
                    checkRecursive="true" allowSelect="false" enableHotTrack="false">        
                </ul>
            </div>
             
        </div>
    </div> 
        <div style="text-align:center;padding:5px;">               
          <a class="mini-button" onclick="onOk" style="width:60px;margin-right:20px;">确定</a>              
        </div> 
    <script type="text/javascript">
        mini.parse();
        function onOk(e) {
            SaveData();
        }
        function saveData() {
            var tree = mini.get("tree1");
            var data = tree.getData();
            var json = mini.encode(data);

            var msgid = mini.loading("数据保存中，请稍后......", "保存数据");
            $.ajax({
                url: "../DeptManage/SaveDeptTree",
                data: { data: json },
                type: "post",
                success: function (text) {
                    mini.hideMessageBox(msgid);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR.responseText);
                }
            });
    </script>
</body>
</html>


         
